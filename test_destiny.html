<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµ‹è¯•é¡µé¢</title>
</head>
<body>
    <div id="test">åˆå§‹åŒ–æµ‹è¯•</div>
    <div id="baziInfo">
        <h3>ğŸ“Š å‘½ç›˜ä¿¡æ¯</h3>
        <div class="info-item">æ­£åœ¨åŠ è½½...</div>
    </div>
    <div id="lifeStages">
        <!-- äººç”Ÿé˜¶æ®µä¼šåŠ¨æ€ç”Ÿæˆ -->
    </div>
    <button onclick="testInit()">æµ‹è¯•åˆå§‹åŒ–</button>
    
    <script>
        // æ¨¡æ‹Ÿå…«å­—æ•°æ®
        const testBaziData = {
            birth_info: {
                date: '1990-01-01',
                time: '8',
                gender: 'ç”·',
                shengxiao: 'é©¬',
                calendar_type: 'å†œå†'
            }
        };
        
        // æ¨¡æ‹Ÿä¿å­˜åˆ°localStorage
        localStorage.setItem('baziData', JSON.stringify(testBaziData));
        
        // äººç”Ÿé˜¶æ®µé…ç½®
        const lifeStages = [
            { name: 'ç«¥å¹´', ageRange: '0-8å²', description: 'å¤©çœŸçƒ‚æ¼«çš„å¯è’™æ—¶æœŸ' },
            { name: 'å°‘å¹´', ageRange: '9-18å²', description: 'æ±‚å­¦æˆé•¿çš„å…³é”®æ—¶æœŸ' },
            { name: 'é’å¹´', ageRange: '19-28å²', description: 'äº‹ä¸šèµ·æ­¥çš„å¥‹æ–—æ—¶æœŸ' },
            { name: 'å£®å¹´', ageRange: '29-38å²', description: 'äº‹ä¸šå®¶åº­çš„åŒçº¿å‘å±•' },
            { name: 'ä¸­å¹´', ageRange: '39-48å²', description: 'äººç”Ÿå·…å³°çš„æ”¶è·æ—¶æœŸ' },
            { name: 'ä¸­è€å¹´', ageRange: '49-58å²', description: 'æ™ºæ…§æ²‰æ·€çš„ä¼ æ‰¿æ—¶æœŸ' },
            { name: 'è€å¹´', ageRange: '59-68å²', description: 'å›é¦–äººç”Ÿçš„æ€»ç»“æ—¶æœŸ' }
        ];
        
        // æ¸¸æˆçŠ¶æ€
        let gameState = {
            baziData: null,
            storyHistory: []
        };
        
        function displayBaziInfo() {
            const baziInfo = document.getElementById('baziInfo');
            const birthInfo = gameState.baziData.birth_info;
            
            baziInfo.innerHTML = `
                <h3>ğŸ“Š å‘½ç›˜ä¿¡æ¯</h3>
                <div class="info-item">ğŸ“… ${birthInfo.date}</div>
                <div class="info-item">â° ${birthInfo.time}ç‚¹</div>
                <div class="info-item">ğŸ‘¤ ${birthInfo.gender}</div>
                <div class="info-item">ğŸ² ${birthInfo.shengxiao}</div>
            `;
        }
        
        function generateLifeStages() {
            const stagesContainer = document.getElementById('lifeStages');
            stagesContainer.innerHTML = lifeStages.map((stage, index) => `
                <div class="life-stage ${index === 0 ? 'current' : ''}" id="stage-${index}">
                    <h4>${stage.name}</h4>
                    <p>${stage.ageRange}</p>
                    <p>${stage.description}</p>
                </div>
            `).join('');
        }
        
        function testInit() {
            console.log('å¼€å§‹æµ‹è¯•åˆå§‹åŒ–...');
            
            // ä»localStorageè·å–å…«å­—æ•°æ®
            const baziDataStr = localStorage.getItem('baziData');
            if (!baziDataStr) {
                alert('æœªæ‰¾åˆ°å…«å­—æ•°æ®');
                return;
            }
            
            gameState.baziData = JSON.parse(baziDataStr);
            console.log('å…«å­—æ•°æ®è½½å…¥æˆåŠŸ:', gameState.baziData);
            
            // æ˜¾ç¤ºå…«å­—ä¿¡æ¯
            displayBaziInfo();
            console.log('å…«å­—ä¿¡æ¯æ˜¾ç¤ºå®Œæˆ');
            
            // ç”Ÿæˆäººç”Ÿé˜¶æ®µ
            generateLifeStages();
            console.log('äººç”Ÿé˜¶æ®µç”Ÿæˆå®Œæˆ');
            
            document.getElementById('test').innerHTML = 'åˆå§‹åŒ–å®Œæˆï¼';
        }
        
        // é¡µé¢åŠ è½½åè‡ªåŠ¨æµ‹è¯•
        window.addEventListener('load', testInit);
    </script>
</body>
</html>